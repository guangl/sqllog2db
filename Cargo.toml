[package]
name = "sqllog2db"
version = "0.1.0"
edition = "2024"

[dependencies]
anyhow = "1.0.100"
chrono = "0.4"
clap = { version = "4.5.51", features = ["derive"] }
dm-database-parser-sqllog = { version = "0.3.0", features = ["serde"] }
once_cell = "1.21.3"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
thiserror = "2.0.17"
toml = { version = "0.9.8", features = ["serde"] }
tracing = "0.1.41"
tracing-appender = "0.2.3"
tracing-subscriber = { version = "0.3.20", features = ["env-filter"] }
rayon = "1.10"

# 可选数据库依赖，通过 feature 启用
duckdb = { version = "1.1.3", features = ["bundled"], optional = true }
rusqlite = { version = "0.32.1", features = ["bundled"], optional = true }

[dev-dependencies]
tempfile = "3.23.0"

[features]
# 默认保持当前行为：启用 CSV/JSONL 与两个已实现的文件型数据库导出器
default = ["csv", "jsonl"]

# 各导出器特性开关
csv = []
jsonl = []
sqlite = ["dep:rusqlite"]
duckdb = ["dep:duckdb"]

# 预留的网络数据库导出器特性（当前未实现，编译几乎无体积）
postgres = []
oracle = []
dm = []
